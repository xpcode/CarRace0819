<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>CarRace</title>
	<script src="/js/lib/Box2dWeb-2.1.a.3.min.js"></script>
	<script src="/js/lib/lufylegend-1.9.0.js"></script>
	<script type="text/javascript">

	var game = {
		// 刷新间隔，毫秒数
		interval: 50,

		// 画布宽度、高度
		width: 800,
		height: 450,

		// 循环播放最大宽度
		cycleWidth: 907 - 807,

		// 容器DOM的ID
		eleId: 'legend',

		// 虚拟游戏世界
		world: null,

		// 所有静态资源，图片文件、脚本文件、声音文件
		resources: [{
			name: "bg",
			path: "/img/bg.png"
		}, {
			name: "car",
			path: "/img/car.png"
		}, {
			name: "gas",
			path: "/img/gas.png"
		}, {
			name: "jyq",
			path: "/img/jyq.png"
		}, {
			name: "roadtip",
			path: "/img/roadtip.png"
		}, {
			name: "time_1",
			path: "/img/time/1.png"
		}, {
			name: "time_2",
			path: "/img/time/2.png"
		}, {
			name: "time_3",
			path: "/img/time/3.png"
		}, {
			name: "time_go",
			path: "/img/time/go.png"
		}, {
			name: "number_1",
			path: "/img/numbers/1.png"
		}, {
			name: "number_2",
			path: "/img/numbers/2.png"
		}, {
			name: "number_3",
			path: "/img/numbers/3.png"
		}, {
			name: "number_4",
			path: "/img/numbers/4.png"
		}, {
			name: "number_5",
			path: "/img/numbers/5.png"
		}, {
			name: "number_6",
			path: "/img/numbers/6.png"
		}, {
			name: "number_7",
			path: "/img/numbers/7.png"
		}, {
			name: "number_8",
			path: "/img/numbers/8.png"
		}, {
			name: "number_9",
			path: "/img/numbers/9.png"
		}, {
			name: "number_0",
			path: "/img/numbers/0.png"
		}, {
			name: "number_dot",
			path: "/img/numbers/dot.png"
		}, {
			name: "number_dw",
			path: "/img/numbers/dw.png"
		}, {
			name: "number_km",
			path: "/img/numbers/km.png"
		}, {
			name: "building_l0",
			path: "/img/buildings/l0.png"
		}, {
			name: "building_l1",
			path: "/img/buildings/l1.png"
		}, {
			name: "building_l2",
			path: "/img/buildings/l2.png"
		}, {
			name: "building_l3",
			path: "/img/buildings/l3.png"
		}, {
			name: "building_l4",
			path: "/img/buildings/l4.png"
		}, {
			name: "building_l5",
			path: "/img/buildings/l5.png"
		}, {
			name: "building_l6",
			path: "/img/buildings/l6.png"
		}, {
			name: "building_l7",
			path: "/img/buildings/l7.png"
		}, {
			name: "building_r0",
			path: "/img/buildings/r0.png"
		}, {
			name: "building_r1",
			path: "/img/buildings/r1.png"
		}, {
			name: "building_r2",
			path: "/img/buildings/r2.png"
		}, {
			name: "building_r3",
			path: "/img/buildings/r3.png"
		}, {
			name: "building_r4",
			path: "/img/buildings/r4.png"
		}, {
			name: "building_r5",
			path: "/img/buildings/r5.png"
		}, {
			name: "building_r6",
			path: "/img/buildings/r6.png"
		}, {
			name: "building_r7",
			path: "/img/buildings/r7.png"
		}, {
			type: "js",
			path: "/js/main/main.js"
		}, {
			type: "js",
			path: "/js/main/background.js"
		}, {
			type: "js",
			path: "/js/main/car.js"
		}, {
			type: "js",
			path: "/js/main/prop.js"
		}, {
			type: "js",
			path: "/js/main/ready.js"
		}, {
			type: "js",
			path: "/js/main/gameover.js"
		}]
	};


	LGlobal.ios = true;
	LGlobal.aspectRatio = PORTRAIT;

	init(game.interval, game.eleId, game.width, game.height, function() {
		LGlobal.setDebug(true);
		LStage.setDebug(true);
		LStage.box2d = new LBox2d();

		var initScreen = window.onorientationchange = window.onresize = function(){
			if (LGlobal.canTouch) {
				LGlobal.stageScale = window.innerWidth < window.innerHeight ? LStageScaleMode.SHOW_ALL : LStageScaleMode.EXACT_FIT;
			} else {
				LGlobal.stageScale = LStageScaleMode.SHOW_ALL;
			}
			LGlobal.align = LStageAlign.MIDDLE;
			LSystem.screen(LStage.FULL_SCREEN);
		};

		initScreen();

		var loadingLayer = new LoadingSample7();
		addChild(loadingLayer);

		LLoadManage.load(game.resources, function(progress) {
			loadingLayer.setProgress(progress);

		}, function(result){
			removeChild(loadingLayer);
			loadingLayer = null;
			delete loadingLayer;

			game.dataList = result;

			game.world = new Main();
			addChild(game.world);

			game.world.init();
		});
	});

	</script>
</head>
<body style="padding: 0; margin: 0; border: 0;">
	<div id="legend">loading……</div>
</body>
</html>